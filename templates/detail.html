<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Team Detail</title>
</head>
<body class="bg-gray-100">

  <nav class="bg-indigo-600 text-white p-4">
    <div class="max-w-4xl mx-auto flex justify-between items-center">
      <h1 class="font-bold text-lg">Team Detail</h1>
      <a href="index.html" class="bg-white text-indigo-600 px-3 py-1 rounded">Geri</a>
    </div>
  </nav>

  <div class="max-w-4xl mx-auto p-4">
    <h2 id="teamTitle" class="text-xl font-semibold mb-4">Yükleniyor...</h2>

    <div id="matchList" class="flex flex-col divide-y divide-gray-300"></div>
  </div>

  <script>
    const matchList = document.getElementById("matchList");
    const teamTitle = document.getElementById("teamTitle");

    const params = new URLSearchParams(window.location.search);
    const teamId = params.get("team_id");

    if (!teamId) {
      teamTitle.textContent = "Geçersiz Team ID!";
    } else {
      teamTitle.textContent = `Team ${teamId} Maç Detayları`;

      // Backende fetch
      fetch(`/detail_info?team_id=${teamId}`)
        .then(res => {
          if (!res.ok) throw new Error("Veri alınamadı");
          return res.json();
        })
        .then(data => {
          if (data.length === 0) {
            matchList.innerHTML = `<p class="text-red-500">Bu takım için maç bulunamadı.</p>`;
            return;
          }

          data.forEach(match => {
            const div = document.createElement("div");
            div.className = "p-3 hover:bg-gray-50 transition rounded flex justify-between items-center";
            div.innerHTML = `
              <span class="font-bold text-indigo-600">Team ${match.team_number}</span>
              <span class="text-gray-700">Match: ${match.match_id}</span>
              <span class="font-medium text-green-600">${match.alliance.toUpperCase()}</span>
              <span class="text-sm text-gray-500">Auto: ${match.auto_score}, Teleop: ${match.teleop_score}</span>
            `;
            matchList.appendChild(div);
          });
        })
        .catch(err => {
          console.error(err);
          matchList.innerHTML = `<p class="text-red-500">Maç detayları yüklenemedi!</p>`;
        });
    }
  </script>
</body>
</html>
